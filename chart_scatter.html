<!DOCTYPE html>
<html lang="zh-Hant-TW">
<head>
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0">
<meta charset="utf-8">
<meta http-equiv='X-UA-Compatible' content='IE=edge'/>
<title>統計圖 - 點狀圖</title>
<meta http-equiv="Cache-Control" content="no-cache, no-store, max-age=0, must-revalidate">
<meta http-equiv="pragma" content="no-cache" />
<meta http-equiv="expires" content="0" />
<link rel="shortcut icon" href="./favicon.ico">
<link rel="stylesheet" type="text/css" href="./assets/style/index.css">
<link rel="stylesheet" type="text/css" href="./libs/bootstrap/css/bootstrap.min.css">
<link rel="stylesheet" type="text/css" href="./libs/fontawesome/css/all.min.css">
<link rel="stylesheet" type="text/css" href="./libs/apexcharts/apexcharts.css">
<style>
</style>
</head>
<body class="body body-subpage ot-overwrite">
  <div id="chart_scatter">
    <div class="wrapper_head container-fluid">
      <div class="head_title">
        <span class="title_item title-layer1">統計圖</span>
        <span class="title_item title-separator"><i class="fas fa-angle-double-right fa-fw"></i></span>
        <span class="title_item title-layer2">點狀圖</span>
      </div>
    </div>
  
    <div class="divider"></div>
  
    <div class="wrapper_body container-fluid">
      <div id="block_basic"
            class="block">
        <div class="block_head click-enable"
              onClick="toggleChart('basic')">
          <div class="block_title">
            <span class="title_item item-icon">
              <i class="fas fa-chart-bar fa-fw"></i>
            </span>
            <span class="title_item">基本</span>
          </div>
          <div class="block_toggler">
            <i class="fas fa-angle-down fa-fw"></i>
          </div>
        </div>
        <div class="block_content">
          <div id="chart_basic" class="block_chart"></div>
        </div>
      </div>

      <div class="divider"></div>

      <div id="block_datetime"
            class="block">
        <div class="block_head click-enable"
              onClick="toggleChart('datetime')">
          <div class="block_title">
            <span class="title_item item-icon">
              <i class="fas fa-chart-bar fa-fw"></i>
            </span>
            <span class="title_item">時間序</span>
          </div>
          <div class="block_toggler">
            <i class="fas fa-angle-down fa-fw"></i>
          </div>
        </div>
        <div class="block_content">
          <div id="chart_datetime" class="block_chart"></div>
        </div>
      </div>
    </div>

<noscript>Your browser does not support JavaScript!</noscript>

<script type="text/javascript" src="./assets/js/chart.js"></script>

<script type="text/javascript" src="./libs/jquery/jquery-3.3.1.min.js"></script>
<script type="text/javascript" src="./libs/apexcharts/apexcharts.min.js"></script>

<script type="text/javascript">
var chartList = {
  basic: undefined,
  datetime: undefined
}

$(document).ready(function (){
  setCharts();
  render();
});

function setCharts() {
  setBasic();
  setDatetime();
};

function render () {
  toggleChart('basic', true);
  toggleChart('datetime', false);
};

function setBasic () {
  var options = {
    chart: {
      height: 300,
      type: 'scatter',
      zoom: {
        enabled: true,
        type: 'xy'
      }
    },
    series: [{
      name: "SAMPLE A",
      data: [
      [16.4, 5.4], [21.7, 2], [25.4, 3], [19, 2], [10.9, 1], [13.6, 3.2], [10.9, 7.4], [10.9, 0], [10.9, 8.2], [16.4, 0], [16.4, 1.8], [13.6, 0.3], [13.6, 0], [29.9, 0], [27.1, 2.3], [16.4, 0], [13.6, 3.7], [10.9, 5.2], [16.4, 6.5], [10.9, 0], [24.5, 7.1], [10.9, 0], [8.1, 4.7], [19, 0], [21.7, 1.8], [27.1, 0], [24.5, 0], [27.1, 0], [29.9, 1.5], [27.1, 0.8], [22.1, 2]]
    },{
      name: "SAMPLE B",
      data: [
      [36.4, 13.4], [1.7, 11], [5.4, 8], [9, 17], [1.9, 4], [3.6, 12.2], [1.9, 14.4], [1.9, 9], [1.9, 13.2], [1.4, 7], [6.4, 8.8], [3.6, 4.3], [1.6, 10], [9.9, 2], [7.1, 15], [1.4, 0], [3.6, 13.7], [1.9, 15.2], [6.4, 16.5], [0.9, 10], [4.5, 17.1], [10.9, 10], [0.1, 14.7], [9, 10], [12.7, 11.8], [2.1, 10], [2.5, 10], [27.1, 10], [2.9, 11.5], [7.1, 10.8], [2.1, 12]]
    },{
      name: "SAMPLE C",
      data: [
      [21.7, 3], [23.6, 3.5], [24.6, 3], [29.9, 3], [21.7, 20], [23, 2], [10.9, 3], [28, 4], [27.1, 0.3], [16.4, 4], [13.6, 0], [19, 5], [22.4, 3], [24.5, 3], [32.6, 3], [27.1, 4], [29.6, 6], [31.6, 8], [21.6, 5], [20.9, 4], [22.4, 0], [32.6, 10.3], [29.7, 20.8], [24.5, 0.8], [21.4, 0], [21.7, 6.9], [28.6, 7.7], [15.4, 0], [18.1, 0], [33.4, 0], [16.4, 0]]
    }],
    colors: js_chartColor, // customized color map
    xaxis: {
      tickAmount: 10,
      labels: {
        formatter: function(val) {
          return parseFloat(val).toFixed(1)
        }
      }
    },
    yaxis: {
      tickAmount: 7
    }
  }

  chartList['basic'] = new ApexCharts(
    document.querySelector("#chart_basic"),
    options
  );
}
function setDatetime () {
  var options = {
    chart: {
      height: 300,
      type: 'scatter',
      zoom: {
        type: 'xy'
      }
    },
    series: [{
        name: 'TEAM 1',
        data: generateDayWiseTimeSeries(new Date('11 Feb 2017 GMT').getTime(), 20, {
          min: 10,
          max: 60
        })
      },
      {
        name: 'TEAM 2',
        data: generateDayWiseTimeSeries(new Date('11 Feb 2017 GMT').getTime(), 20, {
          min: 10,
          max: 60
        })
      },
      {
        name: 'TEAM 3',
        data: generateDayWiseTimeSeries(new Date('11 Feb 2017 GMT').getTime(), 30, {
          min: 10,
          max: 60
        })
      },
      {
        name: 'TEAM 4',
        data: generateDayWiseTimeSeries(new Date('11 Feb 2017 GMT').getTime(), 10, {
          min: 10,
          max: 60
        })
      },
      {
        name: 'TEAM 5',
        data: generateDayWiseTimeSeries(new Date('11 Feb 2017 GMT').getTime(), 30, {
          min: 10,
          max: 60
        })
      },
    ],
    dataLabels: {
      enabled: false
    },
    colors: js_chartColor, // customized color map
    grid: {
      xaxis: {
        showLines: true
      },
      yaxis: {
        showLines: true
      },
    },
    xaxis: {
      type: 'datetime',

    },
    yaxis: {
      max: 70
    }
  }

  chartList['datetime']= new ApexCharts(
    document.querySelector("#chart_datetime"),
    options
  );

  /*
  // this function will generate output in this format
  // data = [
      [timestamp, 23],
      [timestamp, 33],
      [timestamp, 12]
      ...
  ]
  */
  function generateDayWiseTimeSeries(baseval, count, yrange) {
    var i = 0;
    var series = [];
    while (i < count) {
      var y = Math.floor(Math.random() * (yrange.max - yrange.min + 1)) + yrange.min;

      series.push([baseval, y]);
      baseval += 86400000;
      i++;
    }
    return series;
  }
}

function toggleChart(id, trig) {
  var trigger = false;
  var count;
  if(trig)
  {
    trigger = trig;
  } else {
    trigger = $('#block_'+id).hasClass('collapsed');
  };
  switch(id)
  {
    default:
      if(trigger)
      {
        $('#block_'+id).removeClass('collapsed');
        if(!$('#chart_'+id).hasClass('rendered'))
        {
          chartList[id].render();
          $('#chart_'+id).addClass('rendered');
        }
      } else {
        $('#block_'+id).addClass('collapsed');
        if($('#chart_'+id).hasClass('rendered'))
        {
          chartList[id].destroy();
          $('#chart_'+id).removeClass('rendered');
        }
      };
      break;
  };
};
</script>
</body>
</html>